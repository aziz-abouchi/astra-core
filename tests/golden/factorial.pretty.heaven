module std.examples.factorial

factorial : Nat -> Nat factorial 0 = 1 factorial n = n * factorial (n - 1)

factorial_tail : Nat -> Nat fn factorial_tail n = let rec loop n acc = if n == 0 then acc else loop (n - 1) (acc * n) in loop n 1

main : IO Unit fn main = let n = readNat in let r = factorial_tail n in printNat r

factorial_log : Nat -> Buffer ‚ä∏ IO Unit fn factorial_log n buf = let rec loop n acc buf = if n == 0 then let buf1 = appendLog buf "Result: " in let buf2 = appendLog buf1 (show acc) in flushLog buf2 else let buf1 = appendLog buf ("Step: " ++ show n) in loop (n - 1) (acc * n) buf1 in loop n 1 buf

main_linear : IO Unit fn main_linear = let n = readNat in let buf = newBuffer in factorial_log n buf
